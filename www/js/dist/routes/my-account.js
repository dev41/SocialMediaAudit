/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "/";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./www/js/app/routes/my-account.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./www/js/app/components/Alert.js":
/*!****************************************!*\
  !*** ./www/js/app/components/Alert.js ***!
  \****************************************/
/*! exports provided: Alert, messageTypes */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Alert\", function() { return Alert; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"messageTypes\", function() { return messageTypes; });\nconst alertClassTypes = {\n    ERROR: 'bg--error',\n    SUCCESS: 'bg--success',\n    INFO: 'bg--primary',\n    WARNING: 'bg--warning'\n};\n\nconst messageTypes = {\n    ERROR: -1,\n    CLEAR: 0,\n    SUCCESS: 1,\n    COMPLETE: 2\n};\n\nclass Alert\n{\n    static getTemplate()\n    {\n        return $('.js-alert-template').html();\n    }\n\n    /**\n     * @param {string} message\n     * @param {number} [messageType=messageType.ERROR]\n     * @param {jQuery} container\n     * @param {{}} options\n     */\n    static showMessage(message, messageType, container = $('.js-container-alert'), options = {})\n    {\n        if (messageType === undefined) {\n            messageType = messageTypes.ERROR;\n        }\n\n        let alertClass = messageTypes.ERROR;\n\n        switch (messageType) {\n            case messageTypes.ERROR:\n                alertClass = alertClassTypes.ERROR;\n                $('.' + alertClassTypes.ERROR).remove();\n                break;\n            case messageTypes.SUCCESS:\n                alertClass = alertClassTypes.SUCCESS;\n                $('.' + alertClassTypes.SUCCESS).fadeOut();\n                break;\n        }\n\n        let template = Alert.getTemplate();\n\n        template = template\n            .replace(/\\{type\\}/gi, alertClass)\n            .replace(/\\{message\\}/gi, message);\n        template = $(template);\n\n\n        container.append(template);\n\n        options = options || {};\n        if (options['visibleTime'] !== 'notTimeout') {\n            let visibleTime = options['visibleTime'] || 5000;\n\n            setTimeout(function () {\n                template.fadeOut(function () {\n                    template.remove();\n                    if (options.onHide instanceof Function) {\n                        options.onHide();\n                    }\n                });\n            }, visibleTime);\n        }\n\n        if (options['close'] === false) {\n            template.find($('.close')).hide();\n        }\n\n    };\n}\n\n\n\n//# sourceURL=webpack:///./www/js/app/components/Alert.js?");

/***/ }),

/***/ "./www/js/app/components/Stripe/Billing.js":
/*!*************************************************!*\
  !*** ./www/js/app/components/Stripe/Billing.js ***!
  \*************************************************/
/*! exports provided: Billing, events */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Billing\", function() { return Billing; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"events\", function() { return events; });\n/* harmony import */ var _VisualComponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../VisualComponent */ \"./www/js/app/components/VisualComponent.js\");\n/* harmony import */ var _Alert__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Alert */ \"./www/js/app/components/Alert.js\");\n\n\n\nconst selectors = {\n    processSpinner: '.js-stripe-process-spinner',\n    containerBody: '.js-stripe-card-body',\n    containerNoCard: '.js-stripe-no-card',\n    addressInfo: '.js-address-info',\n\n    loadBtn: '.js-load-btn',\n    cardNumber: '.js-card-number',\n    cardBrand: '.js-card-brand',\n    cardExpire: '.js-card-expire',\n    cardChangeBtn: '.js-change-credit-card',\n};\n\nconst events = {\n    UNLOCK_SUBSCRIPTION: 'unlock_subscription',\n};\n\nclass Billing extends _VisualComponent__WEBPACK_IMPORTED_MODULE_0__[\"VisualComponent\"] {\n    constructor(container) {\n        super(container);\n\n        if (!container.length) {\n            return;\n        }\n\n        this.init();\n    }\n\n    init() {\n        this.initElements();\n        this.initEvents();\n    }\n\n    initElements() {\n        this.elements.processSpinner = this.container.find(selectors.processSpinner);\n\n        this.elements.containerBody = this.container.find(selectors.containerBody);\n        this.elements.containerNoCard = this.container.find(selectors.containerNoCard);\n        this.elements.addressInfo = this.container.find(selectors.addressInfo);\n\n        this.elements.loadBtn = this.container.find(selectors.loadBtn);\n        this.elements.cardNumber = this.container.find(selectors.cardNumber);\n        this.elements.cardBrand = this.container.find(selectors.cardBrand);\n        this.elements.cardExpire = this.container.find(selectors.cardExpire);\n        this.elements.cardChangeBtn = this.container.find(selectors.cardChangeBtn);\n    }\n\n\n    initEvents() {\n        let self = this;\n\n        self.elements.processSpinner.show();\n        self.lock();\n\n        $.ajax({\n            url: 'user-billing',\n            method: 'POST',\n        }).done(function (r) {\n            if (!r.success) {\n                return;\n            }\n\n            self.unlock();\n            self.trigger(events.UNLOCK_SUBSCRIPTION);\n\n            let objCard = r.card,\n                getAddressInfo = function (cardData) {\n                    let lines = [], parts = [];\n\n                    if (cardData.address_line1 || cardData.address_city) {\n\n                        if (cardData.address_line1) {\n                            parts.push(cardData.address_line1);\n                        }\n\n                        if (cardData.address_city) {\n                            parts.push(cardData.address_city);\n                        }\n\n                        lines.push(parts.join(', '));\n                        parts = [];\n                    }\n\n                    if (cardData.address_state_short || cardData.address_zip) {\n\n                        if (cardData.address_state_short) {\n                            parts.push(cardData.address_state_short);\n                        }\n\n                        if (cardData.address_zip) {\n                            parts.push(cardData.address_zip);\n                        }\n\n                        lines.push(parts.join(', '));\n                        parts = [];\n                    }\n\n                    if (cardData.address_country) {\n                        lines.push(cardData.address_country);\n                    }\n\n                    return lines;\n                };\n\n            if (objCard) {\n                self.elements.containerBody.show();\n\n                Object.keys(objCard).forEach(function (key) {\n                    self.elements.containerBody.find('[data-name=\"card-' + key + '\"]').html(objCard[key]);\n                });\n\n                self.elements.addressInfo.html(getAddressInfo(objCard).map(function (val) {\n                    return '<span>' + val + '</span>';\n                }).join('<br>'));\n\n                self.elements.containerNoCard.hide();\n            } else {\n                self.elements.containerNoCard.show();\n            }\n\n            self.container.find('.js-change-card-btn').show();\n\n        }).fail(function (xhr) {\n            let message = xhr.responseJSON.message;\n            _VisualComponent__WEBPACK_IMPORTED_MODULE_0__[\"VisualComponent\"].showMessage(message, _Alert__WEBPACK_IMPORTED_MODULE_1__[\"messageTypes\"].ERROR);\n        }).always(function () {\n            self.elements.processSpinner.hide();\n        });\n\n        self.elements.cardChangeBtn.change(function (e) {\n            e.preventDefault();\n\n            let form = this,\n                formData = form.serialize();\n            $.ajax({\n                url: form.attr(\"action\"),\n                type: form.attr(\"method\"),\n                data: formData\n            });\n        });\n    }\n}\n\n\n\n//# sourceURL=webpack:///./www/js/app/components/Stripe/Billing.js?");

/***/ }),

/***/ "./www/js/app/components/Stripe/BillingHistory.js":
/*!********************************************************!*\
  !*** ./www/js/app/components/Stripe/BillingHistory.js ***!
  \********************************************************/
/*! exports provided: BillingHistory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BillingHistory\", function() { return BillingHistory; });\n/* harmony import */ var _VisualComponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../VisualComponent */ \"./www/js/app/components/VisualComponent.js\");\n/* harmony import */ var _Alert__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Alert */ \"./www/js/app/components/Alert.js\");\n\n\n\nconst selectors = {\n    alertContainer: '.js-container-alert',\n    processSpinner: '.js-stripe-process-spinner',\n\n    containerBody: '.js-stripe-billing-history-body',\n    tableBody: '.js-table-body',\n\n    payNowBtn: '.js-pay-now-btn',\n};\n\nconst money = new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD',\n    minimumFractionDigits: 2\n});\n\nclass BillingHistory extends _VisualComponent__WEBPACK_IMPORTED_MODULE_0__[\"VisualComponent\"] {\n    constructor(container) {\n        super(container);\n\n        if (!container.length) {\n            return;\n        }\n\n        this.init();\n    }\n\n    init() {\n        this.initElements();\n        this.initEvents();\n    }\n\n    initElements() {\n        this.elements.alertContainer = $(selectors.alertContainer);\n        this.elements.processSpinner = this.container.find(selectors.processSpinner);\n\n        this.elements.containerBody = this.container.find(selectors.containerBody);\n        this.elements.tableBody = this.container.find(selectors.tableBody);\n    }\n\n    initEvents() {\n        let self = this;\n        self.elements.processSpinner.show();\n\n        $.ajax({\n            url: 'user-billing-history',\n            method: 'POST'\n        }).done(function (r) {\n            if (!r.success) {\n                return;\n            }\n\n            self.elements.containerBody.show();\n            self.table(r.invoice);\n            self.payNow();\n\n        }).fail(function (xhr) {\n            var message = xhr.responseJSON.message;\n            _VisualComponent__WEBPACK_IMPORTED_MODULE_0__[\"VisualComponent\"].showMessage(message, _Alert__WEBPACK_IMPORTED_MODULE_1__[\"messageTypes\"].ERROR, self.elements.alertContainer,);\n        }).always(function () {\n            self.elements.processSpinner.hide();\n        });\n    }\n\n    /**\n     * @param {Object} invoice\n     */\n    table(invoice) {\n        let self = this,\n            invoices = invoice.data,\n            table = self.elements.tableBody,\n            showPayNowColumn = false,\n            t = table.DataTable({\n                order: [[0, 'desc']],\n                responsive: !0,\n                filter: false,\n                lengthChange: false,\n                aoColumnDefs: [\n                    {\n                        bSortable: false,\n                        aTargets: [-1]\n                    },\n                    {\n                        class: 'status',\n                        aTargets: [3]\n                    }\n                ]\n            });\n\n        invoices.forEach(function (invoice) {\n\n            if (['draft', 'open', 'paid'].indexOf(invoice.status) === -1) {\n                return;\n            }\n\n            let pdf = '<a class=\"btn btn--success\" href=\"' + invoice.invoice_pdf + '\" target=\"_blank\"><span>View</span></a>',\n                amount = (invoice.amount_paid ? invoice.amount_paid : invoice.total) / 100,\n                date = new Date(invoice.created * 1000),\n                buttonPayNow = '<a href=\"' + invoice.hosted_invoice_url + '\" class=\"ladda-button ladda-button-n1 btn btn--sm btn--primary\" target=\"_blank\"> Pay Now </a>';\n\n            if (['open', 'draft'].indexOf(invoice.status) !== -1) {\n                buttonPayNow = '<a data-invoice=\"' + invoice.id + '\" class=\"ladda-button ladda-button-n1 btn btn--sm btn--primary js-pay-now-btn\">' +\n                    '<span> Pay Now </span></a>';\n                showPayNowColumn = true;\n            } else if (['paid'].indexOf(invoice.status) !== -1) {\n                buttonPayNow = '';\n            }\n\n            t.row.add([\n                invoice.number,\n                date.toLocaleString(),\n                money.format(amount),\n                invoice.status,\n                pdf,\n                buttonPayNow,\n            ]);\n        });\n\n        if (!showPayNowColumn) {\n            table.addClass('--hide-pay-now');\n        }\n\n        t.draw(false);\n    }\n\n    payNow() {\n        let self = this;\n\n        self.container.find(selectors.payNowBtn).on('click', function () {\n            let btn = $(this);\n\n            self.lock();\n            self.elements.processSpinner.show();\n\n            $.ajax({\n                url: 'user-pay-now',\n                method: 'POST',\n                data: {invoice: btn.data('invoice')}\n            }).done(function (r) {\n                if (!r.message || !r.success) {\n                    return;\n                }\n                window.scroll(0, 0);\n                _VisualComponent__WEBPACK_IMPORTED_MODULE_0__[\"VisualComponent\"].showMessage(r.message, _Alert__WEBPACK_IMPORTED_MODULE_1__[\"messageTypes\"].SUCCESS, self.elements.alertContainer, {\n                    visibleTime: 2000,\n                    onHide: function () {\n                        document.location.reload();\n                    }\n                });\n\n            }).fail(function (xhr) {\n                let message = xhr.responseJSON.message;\n                _VisualComponent__WEBPACK_IMPORTED_MODULE_0__[\"VisualComponent\"].showMessage(message, _Alert__WEBPACK_IMPORTED_MODULE_1__[\"messageTypes\"].ERROR, self.elements.alertContainer);\n            }).always(function () {\n                self.unlock();\n                self.elements.processSpinner.hide();\n            });\n        });\n    }\n}\n\n\n\n//# sourceURL=webpack:///./www/js/app/components/Stripe/BillingHistory.js?");

/***/ }),

/***/ "./www/js/app/components/Stripe/ChangeCard.js":
/*!****************************************************!*\
  !*** ./www/js/app/components/Stripe/ChangeCard.js ***!
  \****************************************************/
/*! exports provided: ChangeCard */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ChangeCard\", function() { return ChangeCard; });\n/* harmony import */ var _VisualComponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../VisualComponent */ \"./www/js/app/components/VisualComponent.js\");\n/* harmony import */ var _Alert__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Alert */ \"./www/js/app/components/Alert.js\");\n/* harmony import */ var _Billing__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Billing */ \"./www/js/app/components/Stripe/Billing.js\");\n\n\n\n\nconst selectors = {\n    billingContainer: '.js-billing-container',\n    alertContainer: '.js-container-alert-change-card',\n    processSpinner: '.js-stripe-process-spinner',\n\n    cardNumber: '.js-stripe-card-number',\n    cardExpiry: '.js-stripe-card-expiry',\n    cardCVC: '.js-stripe-card-cvc',\n    brandIcon: '.js-stripe-card-brand-icon',\n\n    cardZIP: '.js-stripe-card-zip',\n    cardCountry: '.js-user-country',\n    cardState: '.js-user-state',\n    cardCity: '.js-stripe-card-city',\n    cardAddress: '.js-stripe-card-address',\n\n    inputFieldState: '.js-field-state',\n\n    idModal: '#modal',\n    modalSubmit: '.js-change-card-submit',\n    modalForm: '.js-stripe-change-card-form',\n    stateInputTemplate: '.js-state-input-template',\n};\n\nconst inputStyle = {\n    base: {\n        fontSize: '15px',\n        color: 'rgb(102, 102, 102)',\n        lineHeight: '26px',\n        height: '26px',\n        '::placeholder': {\n            color: '#b3b3b3',\n        }\n    },\n};\n\nconst cardBrandToPfClass = {\n    visa: 'pf-visa',\n    mastercard: 'pf-mastercard',\n    amex: 'pf-american-express',\n    discover: 'pf-discover',\n    diners: 'pf-diners',\n    jcb: 'pf-jcb',\n    unknown: 'pf-credit-card'\n};\n\nclass ChangeCard extends _VisualComponent__WEBPACK_IMPORTED_MODULE_0__[\"VisualComponent\"] {\n\n    constructor(container) {\n        super(container);\n        this.form = this.container;\n\n        if (!this.form.length) {\n            return;\n        }\n\n        this.brandIconClass = cardBrandToPfClass.unknown;\n        this.init();\n    }\n\n    init() {\n        this.publicKey = this.form.data('stripe-public-key');\n        this.stripe = window.Stripe(this.publicKey);\n\n        this.initElements();\n        this.initEvents();\n    }\n\n    initElements() {\n\n        this.elements.processSpinner = this.form.find(selectors.processSpinner);\n        this.lock();\n\n        this.elements.alertContainer = this.form.find(selectors.alertContainer);\n\n        this.elementsStripe = this.stripe.elements();\n\n        this.elements.cardNumberElement = this.elementsStripe.create('cardNumber', {\n            style: inputStyle\n        });\n        this.elements.cardNumberElement.mount(selectors.cardNumber);\n\n        this.elements.cardExpiryElement = this.elementsStripe.create('cardExpiry', {\n            style: inputStyle\n        });\n        this.elements.cardExpiryElement.mount(selectors.cardExpiry);\n\n        this.elements.cardCvcElement = this.elementsStripe.create('cardCvc', {\n            style: inputStyle\n        });\n        this.elements.cardCvcElement.mount(selectors.cardCVC);\n\n        this.elements.inputZIP = this.form.find(selectors.cardZIP);\n        this.elements.inputCountry = this.form.find(selectors.cardCountry);\n        this.elements.inputState = this.form.find(selectors.cardState);\n        this.elements.inputCity = this.form.find(selectors.cardCity);\n        this.elements.inputAddress = this.form.find(selectors.cardAddress);\n        this.elements.inputFieldState = this.form.find(selectors.inputFieldState);\n\n        this.elements.userFullName = this.form.data('user-full-name');\n        this.elements.brandIcon = this.form.find(selectors.brandIcon);\n\n        this.elements.modalSubmit = this.form.find(selectors.modalSubmit);\n        this.elements.modalForm = this.form.find(selectors.modalForm);\n        this.elements.modal = $(selectors.modal);\n\n        this.stateInputTemplate = $(selectors.stateInputTemplate).html();\n    }\n\n    afterLock()\n    {\n        this.elements.processSpinner.show();\n    }\n\n    afterUnlock()\n    {\n        this.elements.processSpinner.hide();\n    }\n\n    initEvents() {\n        let self = this;\n\n        self.elements.cardNumberElement.on('ready', () => {\n            self.unlock();\n            self.elements.cardNumberElement.focus();\n        });\n\n        self.elements.cardNumberElement.on('change', function (event) {\n            if (event.brand) {\n                self.setBrandIcon(event.brand);\n            }\n        });\n\n        self.form[0].addEventListener('submit', function (e) {\n\n            if (self.checkLock() === true) {\n                self.lock();\n\n                let options = {\n                    address_zip: self.elements.inputZIP.val().trim(),\n                    address_country: self.elements.inputCountry.val().trim(),\n                    address_state: self.form.find(selectors.cardState).val().trim(),\n                    address_city: self.elements.inputCity.val().trim(),\n                    address_line1: self.elements.inputAddress.val().trim(),\n                    name: self.elements.userFullName,\n                };\n\n                self.stripe.createToken(self.elements.cardNumberElement, options).then(self.processResult.bind(self));\n            }\n            e.preventDefault();\n        });\n\n        self.elements.inputCountry.on('change', function (e) {\n\n            let select = self.elements.inputCountry.select().val(),\n                states = window.sma.states,\n                lists = null;\n\n\n            self.elements.inputCountry.find('option').each(function (i, e) {\n                if ($(e).val() === self.elements.inputCountry.val()) {\n                    $(e).attr(\"selected\", \"selected\");\n\n                } else {\n                    $(e).removeAttr(\"selected\");\n                }\n            });\n\n            if (states) {\n                $.each(states, function (index, value) {\n                    if (index === select) {\n                        $.each(value, function (index, value) {\n                            lists += \"<option value='\" + index + \"'>\" + value + \"</option>\";\n                        });\n                    }\n                });\n\n                if (lists === null) {\n                    self.elements.inputFieldState.removeClass('input-select');\n                    self.elements.inputFieldState.html(self.stateInputTemplate);\n                } else {\n                    self.elements.inputFieldState.addClass('input-select');\n                    self.elements.inputFieldState.html('<select id=\"state\" name=\"User[state]\" class=\"js-user-state\"></select>');\n                    self.form.find(selectors.cardState).html(lists);\n                }\n            } else {\n                self.inputFieldState.removeClass('input-select');\n                self.inputFieldState.html(self.stateInputTemplate);\n            }\n        });\n\n    }\n\n    processResult(result) {\n        let self = this;\n\n        if (result.token) {\n            $.ajax({\n                url: this.form.attr('action'),\n                method: 'POST',\n                data: {\n                    token: result.token,\n                    postal_code: self.elements.inputZIP.val(),\n                    User: {\n                        country: self.elements.inputCountry.val(),\n                        state: self.form.find(selectors.cardState).val(),\n                        address: self.elements.inputAddress.val(),\n                        city: self.elements.inputCity.val(),\n                        zip_code: self.elements.inputZIP.val(),\n                    }\n                }\n            }).done(function (r) {\n                if (!r.message || !r.success) {\n                    return;\n                }\n\n                $(selectors.idModal).modal('hide');\n\n                let billingComponent = new _Billing__WEBPACK_IMPORTED_MODULE_2__[\"Billing\"]($(selectors.billingContainer));\n\n                _VisualComponent__WEBPACK_IMPORTED_MODULE_0__[\"VisualComponent\"].showMessage(r.message, _Alert__WEBPACK_IMPORTED_MODULE_1__[\"messageTypes\"].SUCCESS);\n\n            }).fail(function (xhr) {\n                let message = xhr.responseJSON.message;\n                _VisualComponent__WEBPACK_IMPORTED_MODULE_0__[\"VisualComponent\"].showMessage(message, _Alert__WEBPACK_IMPORTED_MODULE_1__[\"messageTypes\"].ERROR, self.elements.alertContainer,);\n            }).always(function () {\n                self.unlock();\n            });\n        } else if (result.error) {\n            _VisualComponent__WEBPACK_IMPORTED_MODULE_0__[\"VisualComponent\"].showMessage(result.error.message, _Alert__WEBPACK_IMPORTED_MODULE_1__[\"messageTypes\"].ERROR, self.elements.alertContainer,);\n            self.unlock();\n        }\n    };\n\n    setBrandIcon(brand) {\n        var pfClass = cardBrandToPfClass.hasOwnProperty(brand) ?\n            cardBrandToPfClass[brand] :\n            cardBrandToPfClass.unknown;\n\n        this.elements.brandIcon.removeClass(this.brandIconClass);\n        this.elements.brandIcon.addClass(pfClass);\n        this.brandIconClass = pfClass;\n    };\n}\n\n\n\n//# sourceURL=webpack:///./www/js/app/components/Stripe/ChangeCard.js?");

/***/ }),

/***/ "./www/js/app/components/Stripe/Profile.js":
/*!*************************************************!*\
  !*** ./www/js/app/components/Stripe/Profile.js ***!
  \*************************************************/
/*! exports provided: Profile */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Profile\", function() { return Profile; });\n/* harmony import */ var _VisualComponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../VisualComponent */ \"./www/js/app/components/VisualComponent.js\");\n/* harmony import */ var _Alert__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Alert */ \"./www/js/app/components/Alert.js\");\n\n\n\nconst selectors = {\n    containerBody: '.js-profile-body',\n    processSpinner: '.js-stripe-process-spinner',\n    fullNameHeader: '.js-full-name',\n};\n\nclass Profile extends _VisualComponent__WEBPACK_IMPORTED_MODULE_0__[\"VisualComponent\"] {\n    constructor(container) {\n        super(container);\n\n        if (!container.length) {\n            return;\n        }\n\n        this.init();\n    }\n\n    init() {\n        this.initElements();\n        this.initEvents();\n\n    }\n\n    initElements() {\n        this.elements.containerBody = this.container.find(selectors.containerBody);\n        this.elements.processSpinner = this.container.find(selectors.processSpinner);\n        this.elements.fullNameHeader =  $(selectors.fullNameHeader);\n    }\n\n    initEvents() {\n        let self = this;\n\n        self.elements.processSpinner.show();\n        self.elements.containerBody.addClass('hidden');\n        self.lock();\n\n        $.ajax({\n            url: 'user-profile',\n            method: 'POST',\n        }).done(function (r) {\n            if (!r.success) {\n                return;\n            }\n\n            self.unlock();\n            self.elements.containerBody.removeClass('hidden');\n\n            let objUser = r.user;\n\n            Object.keys(objUser).forEach(function (key) {\n                self.elements.containerBody.find('[data-name=\"user-' + key + '\"]').html(objUser[key]);\n            });\n\n            self.elements.fullNameHeader.html('<i class=\"stack-interface stack-users\"></i>' + objUser['first_name'] + ' ' + objUser['last_name']);\n\n            r.user.agency ? self.elements.containerBody.find('[data-name=\"agency-company_name\"]').html(r.user.agency.company_name) : 'N/a';\n\n        }).fail(function (xhr) {\n            let message = xhr.responseJSON.message;\n\n            _VisualComponent__WEBPACK_IMPORTED_MODULE_0__[\"VisualComponent\"].showMessage(message, _Alert__WEBPACK_IMPORTED_MODULE_1__[\"messageTypes\"].ERROR);\n        }).always(function () {\n            self.elements.processSpinner.hide();\n        });\n\n    }\n}\n\n\n\n//# sourceURL=webpack:///./www/js/app/components/Stripe/Profile.js?");

/***/ }),

/***/ "./www/js/app/components/Stripe/ProfileUpdate.js":
/*!*******************************************************!*\
  !*** ./www/js/app/components/Stripe/ProfileUpdate.js ***!
  \*******************************************************/
/*! exports provided: ProfileUpdate */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ProfileUpdate\", function() { return ProfileUpdate; });\n/* harmony import */ var _VisualComponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../VisualComponent */ \"./www/js/app/components/VisualComponent.js\");\n/* harmony import */ var _Alert__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Alert */ \"./www/js/app/components/Alert.js\");\n/* harmony import */ var _Profile__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Profile */ \"./www/js/app/components/Stripe/Profile.js\");\n\n\n\n\nconst selectors = {\n    profileContainer: '.js-profile-container',\n\n    alertContainer: '.js-container-alert-profile',\n    processSpinner: '.js-stripe-process-spinner',\n\n    modalProfileForm: '.js-update-profile-form',\n    modalPasswordForm: '.js-change-password-form',\n    idModal: '#modal',\n};\n\nclass ProfileUpdate extends _VisualComponent__WEBPACK_IMPORTED_MODULE_0__[\"VisualComponent\"]\n{\n    constructor(container) {\n        super(container);\n\n        this.form = this.container;\n\n        if (!this.form.length) {\n            return;\n        }\n        this.init();\n    }\n\n    init() {\n        this.initElements();\n        this.initEvents();\n\n    }\n\n    initElements() {\n\n        this.elements.alertContainer = this.form.find(selectors.alertContainer);\n        this.elements.processSpinner = this.form.find(selectors.processSpinner);\n\n        this.elements.modalProfileForm = $(selectors.modalProfileForm);\n        this.elements.modalPasswordForm = $(selectors.modalPasswordForm);\n    }\n\n    initEvents() {\n        let self = this;\n\n        self.elements.modalProfileForm.on('beforeSubmit', function () {\n            self.updateProfile();\n            return false;\n        });\n\n        self.elements.modalPasswordForm.on('beforeSubmit', function () {\n            self.changePassword();\n            return false;\n        });\n    }\n\n\n    updateProfile() {\n        let self = this,\n            formData = self.form.serialize();\n\n        self.elements.processSpinner.show();\n        self.lock();\n        $(\"input\").prop('disabled', true);\n\n        self.form.addClass('disabled');\n\n        $.ajax({\n            url: self.form.attr(\"action\"),\n            method: 'POST',\n            data: formData,\n            processData: false\n        }).done(function (r) {\n            if (!r.message || !r.success) {\n                return;\n            }\n\n            $(selectors.idModal).modal('hide');\n            let profileComponent = new _Profile__WEBPACK_IMPORTED_MODULE_2__[\"Profile\"](selectors.profileContainer);\n\n            _VisualComponent__WEBPACK_IMPORTED_MODULE_0__[\"VisualComponent\"].showMessage(r.message, _Alert__WEBPACK_IMPORTED_MODULE_1__[\"messageTypes\"].SUCCESS);\n        }).fail(function (xhr) {\n\n            let message = xhr.responseJSON.message;\n\n            if (typeof message === 'object') {\n                let messages = '';\n                Object.keys(message).forEach(function (key) {\n\n                    messages += message[key];\n                });\n                message = messages;\n            }\n\n            _VisualComponent__WEBPACK_IMPORTED_MODULE_0__[\"VisualComponent\"].showMessage(message, _Alert__WEBPACK_IMPORTED_MODULE_1__[\"messageTypes\"].ERROR, self.elements.alertContainer);\n        }).always(function () {\n            self.elements.processSpinner.hide();\n            self.form.removeClass('disabled');\n            $(\"input\").prop('disabled', false);\n            self.unlock();\n        });\n    }\n\n    changePassword() {\n        let self = this,\n            formData = self.form.serialize();\n\n        self.elements.processSpinner.show();\n        self.lock();\n        self.form.addClass('disabled');\n\n        $.ajax({\n            url: self.form.attr(\"action\"),\n            method: 'POST',\n            data: formData\n        }).done(function (r) {\n            if (!r.message || !r.success) {\n                return;\n            }\n\n            $(selectors.idModal).modal('hide');\n\n            _VisualComponent__WEBPACK_IMPORTED_MODULE_0__[\"VisualComponent\"].showMessage(r.message, _Alert__WEBPACK_IMPORTED_MODULE_1__[\"messageTypes\"].SUCCESS);\n\n        }).fail(function (xhr) {\n            let message = xhr.responseJSON.message;\n            if (typeof message === 'object') {\n                let messages = '';\n                Object.keys(message).forEach(function (key) {\n\n                    messages += message[key];\n                });\n                message = messages;\n            }\n            _VisualComponent__WEBPACK_IMPORTED_MODULE_0__[\"VisualComponent\"].showMessage(message, _Alert__WEBPACK_IMPORTED_MODULE_1__[\"messageTypes\"].ERROR, self.elements.alertContainer);\n\n        }).always(function () {\n\n            self.elements.processSpinner.hide();\n            self.form.removeClass('disabled');\n            self.unlock();\n        });\n    }\n}\n\n\n\n//# sourceURL=webpack:///./www/js/app/components/Stripe/ProfileUpdate.js?");

/***/ }),

/***/ "./www/js/app/components/Stripe/Register.js":
/*!**************************************************!*\
  !*** ./www/js/app/components/Stripe/Register.js ***!
  \**************************************************/
/*! exports provided: Register */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Register\", function() { return Register; });\n/* harmony import */ var _VisualComponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../VisualComponent */ \"./www/js/app/components/VisualComponent.js\");\n/* harmony import */ var _Alert__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Alert */ \"./www/js/app/components/Alert.js\");\n\n\n\nconst selectors = {\n    formTitle: '.js-subscription-form-title',\n    cardNumber: '.js-stripe-card-number',\n    cardExpiry: '.js-stripe-card-expiry',\n    cardCVC: '.js-stripe-card-cvc',\n    cardZIP: '.js-stripe-card-zip',\n    TCAccept: '.js-user-tc-accept',\n    cardCountry: '.js-user-country',\n    cardState: '.js-user-state',\n    cardCity: '.js-stripe-card-city',\n    cardAddress: '.js-stripe-card-address',\n    couponInput: '.js-stripe-coupon',\n    inputFieldState: '.js-field-state',\n    brandIcon: '.js-stripe-card-brand-icon',\n    errorContainer: '.js-stripe-container-error',\n    successContainer: '.js-stripe-container-success',\n    couponContainer: '.js-coupon-container',\n    successMessage: '.js-stripe-msg-success',\n    completeMessage: '.js-stripe-msg-complete',\n    processSpinner: '.js-stripe-process-spinner',\n    processSpinnerAmount: '.js-amount-process-spinner',\n    amountContainer: '.js-amount-container',\n    alertAmount: '.js-amount-container-alert',\n    messageSpinner: '.js-msg-spinner',\n    btnTestCoupon: '.js-btn-test-coupon',\n    btnProcess: '.js-btn-process',\n    subscriptionPrice: '.js-subscription-price',\n    appliedCouponInfo: '.js-applied-coupon-info',\n    stateInputTemplate: '.js-state-input-template',\n};\n\nconst inputStyle = {\n    base: {\n        fontSize: '15px',\n        color: 'rgb(102, 102, 102)',\n        lineHeight: '26px',\n        height: '26px',\n        '::placeholder': {\n            color: '#b3b3b3',\n        }\n    }\n};\n\nconst cardBrandToPfClass = {\n    visa: 'pf-visa',\n    mastercard: 'pf-mastercard',\n    amex: 'pf-american-express',\n    discover: 'pf-discover',\n    diners: 'pf-diners',\n    jcb: 'pf-jcb',\n    unknown: 'pf-credit-card'\n};\n\nclass Register extends _VisualComponent__WEBPACK_IMPORTED_MODULE_0__[\"VisualComponent\"] {\n\n    constructor(container)\n    {\n        super(container);\n        this.form = this.container;\n\n        if (!this.form.length) {\n            return;\n        }\n\n        this.brandIconClass = cardBrandToPfClass.unknown;\n        this.init();\n    }\n\n    init()\n    {\n        this.publicKey = this.form.data('stripe-public-key');\n        this.planId = this.form.data('plan-id');\n\n        this.stripe = window.Stripe(this.publicKey);\n\n        this.initElements();\n        this.initEvents();\n\n    }\n\n    initElements()\n    {\n        this.formTile = $(selectors.formTitle);\n\n        this.elements = this.stripe.elements();\n\n        this.cardNumberElement = this.elements.create('cardNumber', {\n            style: inputStyle\n        });\n        this.cardNumberElement.mount(selectors.cardNumber);\n\n        this.cardExpiryElement = this.elements.create('cardExpiry', {\n            style: inputStyle\n        });\n        this.cardExpiryElement.mount(selectors.cardExpiry);\n\n        this.cardCvcElement = this.elements.create('cardCvc', {\n            style: inputStyle\n        });\n        this.cardCvcElement.mount(selectors.cardCVC);\n\n        this.inputZIP = this.form.find(selectors.cardZIP);\n        this.inputTCAccept = this.form.find(selectors.TCAccept);\n        this.inputCountry = this.form.find(selectors.cardCountry);\n        this.inputFieldState = this.form.find(selectors.inputFieldState);\n        this.inputCity = this.form.find(selectors.cardCity);\n        this.inputAddress = this.form.find(selectors.cardAddress);\n\n        this.userFullName = this.form.data('user-full-name');\n        this.brandIcon = this.form.find(selectors.brandIcon);\n        this.btnProcess = this.form.find(selectors.btnProcess);\n\n        this.processSpinner = $(selectors.processSpinner);\n\n        this.couponContainer = $(selectors.couponContainer);\n        this.couponInput = this.couponContainer.find(selectors.couponInput);\n        this.btnTestCoupon = this.couponContainer.find(selectors.btnTestCoupon);\n        this.subscriptionPrice = $(selectors.subscriptionPrice);\n        this.processSpinnerAmount = $(selectors.processSpinnerAmount);\n        this.amountContainer = $(selectors.amountContainer);\n        this.alertAmount = $(selectors.alertAmount);\n        this.appliedCouponInfo = $(selectors.appliedCouponInfo);\n\n        this.stateInputTemplate = $(selectors.stateInputTemplate).html();\n    }\n\n    initEvents()\n    {\n        let self = this;\n\n        self.cardNumberElement.on('ready', function() {\n           self.cardNumberElement.focus();\n        });\n\n        self.cardNumberElement.on('change', function (event) {\n            if (event.empty === true) {\n                return;\n            }\n\n            if (event.brand) {\n                self.setBrandIcon(event.brand);\n            }\n\n            if (event.error) {\n                _VisualComponent__WEBPACK_IMPORTED_MODULE_0__[\"VisualComponent\"].showMessage(event.error.message, _Alert__WEBPACK_IMPORTED_MODULE_1__[\"messageTypes\"].ERROR);\n            }\n        });\n\n        let submitForm = function() {\n            self.processSpinner.show();\n            self.form.addClass('disabled');\n\n            let options = {\n                address_zip: self.inputZIP.val(),\n                address_country: self.inputCountry.val(),\n                address_state: self.form.find(selectors.cardState).val(),\n                address_city: self.inputCity.val(),\n                address_line1: self.inputAddress.val(),\n                name: self.userFullName\n            };\n\n            self.stripe.createToken(self.cardNumberElement, options).then(self.processResult.bind(self));\n        };\n\n        self.form.on('keypress', function (e) {\n            let keycode = (e.keyCode ? e.keyCode : e.which) * 1;\n\n            if (keycode === 13) {\n                submitForm();\n            }\n        });\n        self.form[0].addEventListener('submit', function (e) {\n            submitForm();\n        });\n        self.btnProcess.on('click', function (e) {\n            submitForm();\n        });\n\n        self.btnTestCoupon.on('click', function () {\n            self.checkCoupon();\n        });\n\n        self.couponInput.on('keypress', function (e) {\n            let keycode = (e.keyCode ? e.keyCode : e.which) * 1;\n\n            if (keycode === 13) {\n                self.checkCoupon();\n            }\n        });\n\n        self.inputCountry.on('change', function (e) {\n\n            let select = self.inputCountry.select().val(),\n                states = window.sma.states,\n                lists = null;\n\n\n            self.inputCountry.find('option').each(function (i, e) {\n                if ($(e).val() === self.inputCountry.val()) {\n                    $(e).attr(\"selected\", \"selected\");\n\n                } else {\n                    $(e).removeAttr(\"selected\");\n                }\n            });\n\n            if (states) {\n                $.each(states, function (index, value) {\n                    if (index === select) {\n                        $.each(value, function (index, value) {\n                            lists += \"<option value='\" + index + \"'>\" + value + \"</option>\";\n                        });\n                    }\n                });\n\n                if (lists === null) {\n                    self.inputFieldState.removeClass('input-select');\n                    self.inputFieldState.html(self.stateInputTemplate);\n                } else {\n                    self.inputFieldState.addClass('input-select');\n                    self.inputFieldState.html('<select id=\"state\" name=\"User[state]\" class=\"js-user-state\"></select>');\n                    self.form.find(selectors.cardState).html(lists);\n                }\n            } else {\n                self.inputFieldState.removeClass('input-select');\n                self.inputFieldState.html(self.stateInputTemplate);\n            }\n        });\n\n        self.container.find('.js-user-tc-accept-label').on('click', function (e) {\n            if (e.target !== this) {\n                return;\n            }\n            self.inputTCAccept.prop('checked', !self.inputTCAccept.prop('checked'));\n        });\n    }\n\n    /**\n     * @param {string} brand\n     */\n    setBrandIcon(brand)\n    {\n        let pfClass = cardBrandToPfClass.hasOwnProperty(brand) ?\n            cardBrandToPfClass[brand] :\n            cardBrandToPfClass.unknown;\n\n        this.brandIcon.removeClass(this.brandIconClass);\n        this.brandIcon.addClass(pfClass);\n        this.brandIconClass = pfClass;\n    };\n\n    checkCoupon()\n    {\n        let self = this;\n        let coupon = self.couponInput.val().trim();\n\n        if (!coupon) {\n            return;\n        }\n\n        self.processSpinnerAmount.show();\n        self.amountContainer.addClass('disabled');\n\n        $.ajax({\n            url: self.couponContainer.data('url'),\n            method: 'POST',\n            data: {\n                coupon_code: coupon,\n                plan: self.planId\n            }\n        }).done(function (r) {\n            self.showCouponResponse(r);\n            self.couponContainer.hide();\n        }).fail(function (xhr) {\n            self.showCouponResponse(xhr.responseJSON);\n        }).always(function () {\n            self.processSpinnerAmount.hide();\n            self.amountContainer.removeClass('disabled');\n        });\n    };\n\n\n    /**\n     * @param result\n     */\n    processResult(result)\n    {\n        let self = this;\n\n        if (result.token) {\n\n            $.ajax({\n                url: self.form.attr('action'),\n                method: 'POST',\n                data: {\n                    token: result.token,\n                    postal_code: self.inputZIP.val(),\n                    coupon_code: self.couponInput.val().trim(),\n                    User: {\n                        tc_accept: self.inputTCAccept.is(\":checked\") ? 1 : 0,\n                        country: self.inputCountry.val(),\n                        state: self.form.find(selectors.cardState).val(),\n                        address: self.inputAddress.val(),\n                        city: self.inputCity.val(),\n                        zip_code: self.inputZIP.val(),\n                    }\n                }\n            }).done(function (r) {\n                if (!r.message || !r.success) {\n                    return;\n                }\n                self.form.addClass('disabled');\n                window.location.href = r.url;\n\n            }).fail(function (xhr) {\n                let message = xhr.responseJSON.message;\n                _VisualComponent__WEBPACK_IMPORTED_MODULE_0__[\"VisualComponent\"].showMessage(message, _Alert__WEBPACK_IMPORTED_MODULE_1__[\"messageTypes\"].ERROR);\n                self.processSpinner.hide();\n                self.form.removeClass('disabled');\n            });\n\n        } else if (result.error) {\n            _VisualComponent__WEBPACK_IMPORTED_MODULE_0__[\"VisualComponent\"].showMessage(result.error.message, _Alert__WEBPACK_IMPORTED_MODULE_1__[\"messageTypes\"].ERROR);\n            self.processSpinner.hide();\n            self.form.removeClass('disabled');\n        }\n    };\n\n\n    showCouponResponse(response)\n    {\n        let self = this;\n        if (!(response instanceof Object)) {\n            return;\n        }\n\n        let message = response.message || '',\n            price = response.price || 0,\n            messageType = response.success ? _Alert__WEBPACK_IMPORTED_MODULE_1__[\"messageTypes\"].SUCCESS : _Alert__WEBPACK_IMPORTED_MODULE_1__[\"messageTypes\"].ERROR;\n\n        self.alertAmount.html('');\n        _VisualComponent__WEBPACK_IMPORTED_MODULE_0__[\"VisualComponent\"].showMessage(message, messageType, self.alertAmount);\n\n        self.subscriptionPrice.html('$' + price);\n\n        if (response['appliedCouponInfo']) {\n            self.appliedCouponInfo.html(response['appliedCouponInfo']);\n        }\n    };\n}\n\n\n\n//# sourceURL=webpack:///./www/js/app/components/Stripe/Register.js?");

/***/ }),

/***/ "./www/js/app/components/Stripe/Subscription.js":
/*!******************************************************!*\
  !*** ./www/js/app/components/Stripe/Subscription.js ***!
  \******************************************************/
/*! exports provided: Subscription */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Subscription\", function() { return Subscription; });\n/* harmony import */ var _VisualComponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../VisualComponent */ \"./www/js/app/components/VisualComponent.js\");\n/* harmony import */ var _Alert__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Alert */ \"./www/js/app/components/Alert.js\");\n\n\n\nconst selectors = {\n    containerBody: '.js-subscription-body',\n    subscriptionIsset: '.js-isset-subscription',\n    subscriptionAdd: '.js-add-subscription',\n    subscriptionPlan: '.js-subscription-plan',\n    subscriptionTrialMsg: '.js-trial-msg',\n\n    chancelSubscriptionAlert: '.js-cancel-subscription-alert',\n    cancelSubscriptionMsg: '.js-cancel-subscription-msg',\n    cancelBtn: '.js-cancel-subscription-btn',\n\n    reactivateSubContainer: '.js-reactivate-subscription',\n    reactivateBtn: '.js-reactivate-subscription-btn',\n\n    cancelSubBtn: '.js-cancel-sub-submit',\n    cancelForm: '.js-cancel-sub-form',\n    idModalCancel: '#cancelSub',\n\n    processSpinner: '.js-stripe-process-spinner',\n};\n\nclass Subscription extends _VisualComponent__WEBPACK_IMPORTED_MODULE_0__[\"VisualComponent\"] {\n    constructor(container) {\n        super(container);\n        this.init();\n    }\n\n    init() {\n        this.initElements();\n        this.initEvents();\n    }\n\n    initElements() {\n        this.elements.containerBody = this.container.find(selectors.containerBody);\n        this.elements.subscriptionIsset = this.container.find(selectors.subscriptionIsset);\n        this.elements.subscriptionAdd = this.container.find(selectors.subscriptionAdd);\n        this.elements.subscriptionPlan = this.container.find(selectors.subscriptionPlan);\n        this.elements.subscriptionTrialMsg = this.container.find(selectors.subscriptionTrialMsg);\n\n        this.elements.chancelSubscriptionAlert = this.container.find(selectors.chancelSubscriptionAlert);\n        this.elements.cancelSubscriptionMsg = this.container.find(selectors.cancelSubscriptionMsg);\n\n        this.elements.cancelBtn = this.container.find(selectors.cancelBtn);\n        this.elements.cancelSubBtn = $(selectors.cancelSubBtn);\n        this.elements.cancelForm = $(selectors.cancelForm);\n        this.elements.processSpinnerModal = this.elements.cancelForm.find(selectors.processSpinner);\n\n        this.elements.reactivateSubContainer = this.container.find(selectors.reactivateSubContainer);\n        this.elements.reactivateBtn = this.container.find(selectors.reactivateBtn);\n\n        this.elements.processSpinner = this.container.find(selectors.processSpinner);\n    }\n\n    initEvents() {\n        let self = this;\n\n        self.loadSubscription();\n\n        self.elements.cancelBtn.on('click', function () {\n            self.chancelSubscription();\n        });\n\n\n        self.elements.reactivateBtn.on('click', function () {\n            self.reactivateSubscription();\n        });\n    }\n\n    loadSubscription() {\n        let self = this;\n\n        self.lock();\n        self.elements.processSpinner.show();\n\n        $.ajax({\n            url: 'user-subscription',\n            method: 'POST',\n        }).done(function (r) {\n            if (!r.success) {\n                return;\n            }\n\n            if (r.subscription) {\n                let subscription = r.subscription,\n                    options = {year: 'numeric', month: 'long', day: 'numeric'}; // September 17, 2016\n\n                Object.keys(subscription).forEach(function (key) {\n                    if (key === 'current_period_start' || key === 'current_period_end') {\n                        subscription[key] = new Date(subscription[key] * 1000).toLocaleString(\"en-US\", options);\n                    }\n                    self.elements.containerBody.find('[data-name=\"sub-' + key + '\"]').html(subscription[key]);\n                });\n\n                self.subscriptionShowResult(r);\n\n            } else {\n                self.elements.subscriptionAdd.show();\n            }\n\n        }).fail(function (xhr) {\n            let message = xhr.responseJSON.message;\n            _VisualComponent__WEBPACK_IMPORTED_MODULE_0__[\"VisualComponent\"].showMessage(message, _Alert__WEBPACK_IMPORTED_MODULE_1__[\"messageTypes\"].ERROR);\n        }).always(function () {\n            self.unlock();\n            self.elements.processSpinner.hide();\n        });\n    }\n\n    subscriptionShowResult(r)\n    {\n        let self = this,\n            subscription = r.subscription,\n            message = r.message,\n            optionsAlert = {\n                'visibleTime': 'notTimeout',\n                'close': false,\n            };\n\n        if (subscription.status === 'trialing' && !subscription.cancel_at_period_end) {\n\n            self.elements.subscriptionPlan.show();\n            self.elements.subscriptionTrialMsg.show();\n            self.elements.subscriptionAdd.hide();\n            self.elements.subscriptionIsset.show();\n            self.elements.reactivateSubContainer.hide();\n            self.elements.chancelSubscriptionAlert.html(\"\");\n\n        } else if (subscription.status !== 'canceled' && subscription.cancel_at_period_end) {\n\n            _VisualComponent__WEBPACK_IMPORTED_MODULE_0__[\"VisualComponent\"].showMessage(message, _Alert__WEBPACK_IMPORTED_MODULE_1__[\"messageTypes\"].ERROR, self.elements.chancelSubscriptionAlert, optionsAlert);\n            self.elements.subscriptionPlan.show();\n            self.elements.subscriptionIsset.hide();\n            self.elements.subscriptionAdd.show();\n            self.elements.reactivateSubContainer.show();\n\n        } else if (subscription.status === 'canceled') {\n\n            _VisualComponent__WEBPACK_IMPORTED_MODULE_0__[\"VisualComponent\"].showMessage(message, _Alert__WEBPACK_IMPORTED_MODULE_1__[\"messageTypes\"].ERROR, self.elements.chancelSubscriptionAlert, optionsAlert);\n            self.elements.subscriptionAdd.show();\n            self.elements.subscriptionPlan.hide();\n            self.elements.reactivateSubContainer.hide();\n\n        } else if (subscription.status === 'past_due') {\n\n            _VisualComponent__WEBPACK_IMPORTED_MODULE_0__[\"VisualComponent\"].showMessage(message, _Alert__WEBPACK_IMPORTED_MODULE_1__[\"messageTypes\"].ERROR, self.elements.chancelSubscriptionAlert, optionsAlert);\n            self.elements.subscriptionPlan.show();\n\n        } else {\n\n            self.elements.chancelSubscriptionAlert.find('.alert.bg--error').remove();\n\n            if (message) {\n                // VisualComponent.showMessage(r.message, AlertTypes.ERROR, self.elements.chancelSubscriptionAlert, optionsAlert);\n            }\n            self.elements.subscriptionPlan.show();\n            self.elements.subscriptionAdd.hide();\n            self.elements.subscriptionIsset.show();\n            self.elements.reactivateSubContainer.hide();\n\n        }\n    }\n\n    chancelSubscription() {\n        let self = this;\n\n        self.elements.cancelSubBtn.on('click', function () {\n\n            self.elements.processSpinner.show();\n            self.lock();\n\n            $.ajax({\n                url: 'user-cancel-subscription/' + self.elements.cancelForm.data('user-id'),\n                method: 'POST',\n            }).done(function (r) {\n                if (!r.message || !r.success) {\n                    return;\n                }\n\n                $(selectors.idModalCancel).modal('hide');\n\n                _VisualComponent__WEBPACK_IMPORTED_MODULE_0__[\"VisualComponent\"].showMessage(r.message, _Alert__WEBPACK_IMPORTED_MODULE_1__[\"messageTypes\"].SUCCESS);\n                self.loadSubscription();\n\n            }).fail(function (xhr) {\n                let message = xhr.responseJSON.message;\n                _VisualComponent__WEBPACK_IMPORTED_MODULE_0__[\"VisualComponent\"].showMessage(message, _Alert__WEBPACK_IMPORTED_MODULE_1__[\"messageTypes\"].ERROR);\n            }).always(function () {\n                self.elements.processSpinnerModal.hide();\n                self.unlock();\n            });\n\n        });\n    }\n\n    reactivateSubscription() {\n        let self = this;\n\n        self.elements.processSpinner.show();\n        self.lock();\n\n        $.ajax({\n            url: 'user-reactivate-subscription',\n            method: 'POST',\n        }).done(function (r) {\n            if (!r.message || !r.success) {\n                return;\n            }\n\n            _VisualComponent__WEBPACK_IMPORTED_MODULE_0__[\"VisualComponent\"].showMessage(r.message, _Alert__WEBPACK_IMPORTED_MODULE_1__[\"messageTypes\"].SUCCESS);\n            self.loadSubscription();\n\n        }).fail(function (xhr) {\n            let message = xhr.responseJSON.message;\n            _VisualComponent__WEBPACK_IMPORTED_MODULE_0__[\"VisualComponent\"].showMessage(message, _Alert__WEBPACK_IMPORTED_MODULE_1__[\"messageTypes\"].ERROR);\n        }).always(function () {\n            self.unlock();\n        });\n    }\n}\n\n\n\n//# sourceURL=webpack:///./www/js/app/components/Stripe/Subscription.js?");

/***/ }),

/***/ "./www/js/app/components/VisualComponent.js":
/*!**************************************************!*\
  !*** ./www/js/app/components/VisualComponent.js ***!
  \**************************************************/
/*! exports provided: VisualComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"VisualComponent\", function() { return VisualComponent; });\n/* harmony import */ var _libraries_EventManager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../libraries/EventManager */ \"./www/js/app/libraries/EventManager.js\");\n/* harmony import */ var _Alert__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Alert */ \"./www/js/app/components/Alert.js\");\n\n\n\n\n\nconst config = {\n    lockedClass: 'disabled'\n};\n\nclass VisualComponent {\n    /**\n     * @param {jQuery|string} container\n     */\n    constructor(container) {\n        this.container = $(container);\n        this._locked = 0;\n\n        this.alert = new _Alert__WEBPACK_IMPORTED_MODULE_1__[\"Alert\"]();\n\n        this.elements = {};\n\n        /** @member {EventManager} */\n        this.eventManager = new _libraries_EventManager__WEBPACK_IMPORTED_MODULE_0__[\"EventManager\"]();\n    }\n\n    /**\n     * @param {jQuery} [element]\n     */\n    lock(element) {\n        if (element instanceof jQuery) {\n            element.addClass(config.lockedClass);\n            return;\n        }\n\n        this._locked++;\n        this._refreshLock();\n    };\n\n    /**\n     * @param {boolean|jQuery} [hard=false]\n     */\n    unlock(hard) {\n        if (hard instanceof jQuery) {\n            hard.removeClass(config.lockedClass);\n            return;\n        }\n\n        if (this._locked < 1) {\n            return;\n        }\n\n        if (hard === undefined) {\n            hard = false;\n        }\n\n        if (hard === true) {\n            this._locked = 0;\n        } else {\n            this._locked--;\n        }\n\n        this._refreshLock();\n    };\n\n    /**\n     * @return {boolean}\n     */\n    checkLock() {\n        return this._locked === 0;\n    };\n\n    _refreshLock() {\n        if (this.container instanceof jQuery) {\n            if (this._locked === 0) {\n                this.container.removeClass(config.lockedClass);\n                this.afterUnlock();\n            } else {\n                this.container.addClass(config.lockedClass);\n                this.afterLock();\n            }\n        }\n    };\n\n    afterLock()\n    {\n    }\n\n    afterUnlock()\n    {\n    }\n\n    /**\n     * @param {string} message\n     * @param {number} [messageType=messageType.ERROR]\n     * @param {string} container\n     * @param {{}} options\n     */\n    static showMessage(message, messageType, container, options) {\n        _Alert__WEBPACK_IMPORTED_MODULE_1__[\"Alert\"].showMessage(message, messageType, container, options);\n    };\n\n    /**\n     * @param {string} event\n     * @param {*} [data]\n     */\n    trigger(event, data) {\n        this.eventManager.trigger(event, data, this);\n    };\n\n    /**\n     * @param {string} event\n     * @param {*} [data]\n     */\n    globalTrigger(event, data) {\n        _libraries_EventManager__WEBPACK_IMPORTED_MODULE_0__[\"EventManager\"].global.trigger(event, data, this);\n    };\n\n    /**\n     * @param {string} event\n     * @param {function} callback\n     * @returns {CallbackHandler}\n     */\n    on(event, callback) {\n        return this.eventManager.listen.apply(this.eventManager, arguments);\n    };\n\n    /**\n     * @param {string} event\n     * @param {function} callback\n     * @returns {CallbackHandler}\n     */\n    static globalOn(event, callback) {\n        return _libraries_EventManager__WEBPACK_IMPORTED_MODULE_0__[\"EventManager\"].global.listen(event, callback);\n    };\n\n    /**\n     * @param {CallbackHandler} callbackHandler\n     */\n    off(callbackHandler) {\n        this.eventManager.detach.apply(this.eventManager, arguments);\n    };\n\n    /**\n     * @param {CallbackHandler} callbackHandler\n     */\n    static globalOff(callbackHandler) {\n        _libraries_EventManager__WEBPACK_IMPORTED_MODULE_0__[\"EventManager\"].global.detach(callbackHandler);\n    };\n}\n\n\n\n//# sourceURL=webpack:///./www/js/app/components/VisualComponent.js?");

/***/ }),

/***/ "./www/js/app/libraries/EventManager.js":
/*!**********************************************!*\
  !*** ./www/js/app/libraries/EventManager.js ***!
  \**********************************************/
/*! exports provided: EventManager, Event, CallbackHandler */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"EventManager\", function() { return EventManager; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Event\", function() { return Event; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CallbackHandler\", function() { return CallbackHandler; });\n\n\n/**\n * @param {string} event\n * @param {number} callbackId\n * @constructor\n */\nfunction CallbackHandler(event, callbackId)\n{\n    this.event = event;\n    this.callbackId = callbackId;\n}\n\n/**\n * @param {string} eventType\n * @param {Object} target\n * @param {*} data\n * @param {number} counter\n * @constructor\n */\nfunction Event(eventType, target, data, counter)\n{\n    this.eventType = eventType;\n    this.target = target;\n    this.data = data;\n    this.counter = counter;\n}\n\nclass EventManager\n{\n    constructor()\n    {\n        this.listeners = {};\n        this.triggerCounter = {};\n    }\n\n    /**\n     * @param {string} eventType\n     * @param {Object} [data]\n     * @param {Object} [target]\n     * @returns {boolean|null}\n     */\n    trigger(eventType, data, target)\n    {\n        let event = new Event(\n            eventType, target, data, this._addTriggerCounter(eventType)\n        );\n\n        if (\n            (this.listeners.hasOwnProperty('*') === true) &&\n            (eventType !== '*')\n        ) {\n            this._addTriggerCounter('*');\n            EventManager._triggerProcess(this.listeners['*'], event);\n        }\n\n        if (this.listeners.hasOwnProperty(eventType) === false) {\n            return null;\n        }\n\n        return EventManager._triggerProcess(this.listeners[eventType], event);\n    };\n\n    /**\n     * @param {string} event\n     * @param {function} callback\n     * @returns {CallbackHandler}\n     */\n    listen(event, callback)\n    {\n        if (this.listeners.hasOwnProperty(event) === false) {\n            this.listeners[event] = [];\n        }\n\n        let callbackId = this.listeners[event].push(callback);\n        return new CallbackHandler(event, callbackId);\n    };\n\n    /**\n     * @param {CallbackHandler} callbackHandler\n     */\n    detach(callbackHandler)\n    {\n        delete this.listeners[callbackHandler.event][callbackHandler.callbackId];\n    };\n\n    /**\n     * @param {string} event\n     * @return {number|boolean}\n     */\n    checkEvent(event)\n    {\n        return this.triggerCounter.hasOwnProperty(event) ? this.triggerCounter[event] : false;\n    };\n\n    /**\n     * @param {string} event\n     * @return {number}\n     */\n    _addTriggerCounter(event)\n    {\n        let tg = this.triggerCounter;\n\n        if (tg.hasOwnProperty(event) === false) {\n            tg[event] = 0;\n        }\n\n        return ++tg[event];\n    }\n\n    /**\n     * @param {Function} callbacks\n     * @param {Event} event\n     * @returns {boolean}\n     */\n    static _triggerProcess(callbacks, event)\n    {\n        let i, r, response = true;\n\n        for (i = 0; i < callbacks.length; i++) {\n            if (callbacks[i] !== undefined) {\n                r = callbacks[i](event.data, event);\n                if (r !== undefined) {\n                    response = response && r;\n                }\n            }\n        }\n\n        return response;\n    }\n}\n\nEventManager.global = new EventManager();\n\n\n\n//# sourceURL=webpack:///./www/js/app/libraries/EventManager.js?");

/***/ }),

/***/ "./www/js/app/routes/my-account.js":
/*!*****************************************!*\
  !*** ./www/js/app/routes/my-account.js ***!
  \*****************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _components_Stripe_Subscription__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/Stripe/Subscription */ \"./www/js/app/components/Stripe/Subscription.js\");\n/* harmony import */ var _components_Stripe_Billing__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/Stripe/Billing */ \"./www/js/app/components/Stripe/Billing.js\");\n/* harmony import */ var _components_Stripe_BillingHistory__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/Stripe/BillingHistory */ \"./www/js/app/components/Stripe/BillingHistory.js\");\n/* harmony import */ var _components_Stripe_ChangeCard__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/Stripe/ChangeCard */ \"./www/js/app/components/Stripe/ChangeCard.js\");\n/* harmony import */ var _components_Stripe_ProfileUpdate__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/Stripe/ProfileUpdate */ \"./www/js/app/components/Stripe/ProfileUpdate.js\");\n/* harmony import */ var _components_Stripe_Register__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/Stripe/Register */ \"./www/js/app/components/Stripe/Register.js\");\n\n\n\n\n\n\n\n$(function () {\n    new _components_Stripe_Register__WEBPACK_IMPORTED_MODULE_5__[\"Register\"]($('.js-subscription-form'));\n\n    if (window.location.pathname === '/my-account') {\n\n        new _components_Stripe_Subscription__WEBPACK_IMPORTED_MODULE_0__[\"Subscription\"]($('.js-subscription-container'));\n        new _components_Stripe_Billing__WEBPACK_IMPORTED_MODULE_1__[\"Billing\"]($('.js-billing-container'));\n        new _components_Stripe_BillingHistory__WEBPACK_IMPORTED_MODULE_2__[\"BillingHistory\"]($('.js-stripe-billing-history'));\n\n        $('.js-update-profile-btn').on('click', function (e) {\n            showUpdateModal.call(this, function() {\n                setTimeout(function () {\n                    $('#user-first_name').focus();\n                }, 500);\n                new _components_Stripe_ProfileUpdate__WEBPACK_IMPORTED_MODULE_4__[\"ProfileUpdate\"]($('.js-update-profile-form'));\n            });\n        });\n\n        $('.js-change-password-btn').on('click', function (e) {\n            showUpdateModal.call(this, function() {\n                setTimeout(function () {\n                    $('#user-new_password').focus();\n                }, 500);\n                new _components_Stripe_ProfileUpdate__WEBPACK_IMPORTED_MODULE_4__[\"ProfileUpdate\"]($('.js-change-password-form'));\n            });\n        });\n\n        $('.js-change-card-btn').on('click', function (e) {\n            showUpdateModal.call(this, function() {\n                new _components_Stripe_ChangeCard__WEBPACK_IMPORTED_MODULE_3__[\"ChangeCard\"]($('.js-stripe-change-card-form'));\n            });\n        });\n\n        $('#modal').on('hidden.bs.modal', function () {\n            $(this).find('.modal-content').html(\n                '<div class=\"js-stripe-process-spinner\">\\n' +\n                '    <svg class=\"loader\" style=\"position: absolute\">\\n' +\n                '        <use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#i-loader\"></use>\\n' +\n                '    </svg>\\n' +\n                '</div>'\n            );\n        });\n    }\n});\n\nfunction showUpdateModal(onLoad)\n{\n    $('#modal')\n        .modal({\n            focus: false,\n            show: true,\n        })\n        .find('.modal-dialog')\n        .load($(this).attr('data-action'), function(e) {\n            if (onLoad instanceof Function) {\n                onLoad(e, this);\n            }\n        });\n}\n\n//# sourceURL=webpack:///./www/js/app/routes/my-account.js?");

/***/ })

/******/ });